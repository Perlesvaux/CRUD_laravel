0- install php & php-xml:
@bash
sudo apt update
sudo apt install php
sudo apt install php-xml
php -v  #Check version with
php -ini | grep php.ini  #Check config file with
/etc/php/8.1/cli/php.ini  #Config file location
@bashq

@bash
#Run server: go to project's directory and do:
php -S localhost:8000 
@bashq

--Alternative php installation--
Install @a XAMPP @aq  @href https://www.apachefriends.org/es/download.html @hrefq
@bash
/opt/lampp/etc/php.ini  #Config file location
#Run server:
sudo /opt/lampp/lampp start
#turn it off:
sudo /opt/lampp/lampp stop
@bashq


--Setup config file php.ini--
@php
#Un-comment following extensions:
extension=curl
extension=fileinfo
extension=gd
extension=mysqli
extension=openssl

#Enable those PDO you'll be using.
extension=pdo_firebird
extension=pdo_mysql
extension=pdo_oci
extension=pdo_odbc
extension=pdo_pgsql
extension=pdo_sqlite
@phpq

--Dependencies--
1- Installing Node and npm through nvm:
#Install nvm (Node Version Manager)
@bash
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh | bash
nvm install 18
nvm use 18
@bashq

2- install composer (package manager) in current directory
Go @a here @aq @href https://getcomposer.org/download/ @hrefq
...and follow CLI instructions.

You should now have a "composer.phar" on current directory.
#Add it to "~/bin/" to make it accessible from anywhere
@bash
mv composer.phar ~/bin/composer
@bashq

--Laravel--
3- create Laravel project:
@bash
php composer.phar create-project laravel/laravel example-app
@bashq
or, if you did "mv composer.phar ~/bin/composer", then:
@bash
composer create-project laravel/laravel example-app
@bashq

#After project has been created, start Laravel's local development server:
@bash
cd example-app
php artisan serve  #or ./artisan serve
@bashq

--Database config--
4- This example uses MySQL.
For most use-cases, an empty database & a single user with enough privileges will be enough
@bash
sudo apt install mysql-server
sudo mysql_secure_installation
systemctl status mysql
sudo mysql
@bashq
@sql
CREATE DATABASE databasename;
CREATE USER 'username'@'localhost' IDENTIFIED BY 'enterPasswordHere';
GRANT INSERT, SELECT, UPDATE, DELETE ON databasename.* to 'username'@'localhost';
@sqlq
New user can now access MySQL like this:
@bash
mysql -u username -p
@bashq
@sql
USE DATABASE databasename; 
@sqlq
Or, with:
@bash
mysql -h localhost -u username -p databasename
@bashq

5- Configure your project's database settings:
Edit your example-app/.env file accordingly.
@php
#configure database:
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=databasename
DB_USERNAME=username
DB_PASSWORD=PaSSword*
@phpq


6- Let's setup the model, migration and controller:
@bash
./artisan make:model professor -mc
@bashq
This will automatically create:
-->the model [app/Models/professor.php]
Each model class defines a mapping between the database table and the application code.
This mapping is based on naming conventions.
i.e.: 'professor' model maps to a 'professors' database table.

-->the migration [database/migrations/2023_10_19_094147_create_professors_table.php]
Migrations help you create new tables in your database or change existing ones.
Each migration file contains instructions on what the table should look like.
Like a database 'blueprint' or 'cookbook'.

-->the controller [app/Http/Controllers/ProfessorController.php]
Controllers organize your application's logic into reusable and maintainable classes.
i.e.: rendering views or returning JSON data. 


7- Time to code! - Migration:
Go to the [database/migrations/2023_10_19_094147_create_professors_table.php]
Edit the "up()" function to include the columns you want:
@php
public function up(): void
{
Schema::create('professors', function (Blueprint $table) {
    $table->id();
    $table->string('name');
    $table->integer('age');
    $table->timestamps(); /*if you don't want this column, pay attention to next step!*/
});
}
@phpq
If database doesn't yet contain 'professors' table, this command below will create it:
@bash
./artisan migrate

#or this one below to reset whole table and start over:
./artisan migrate:fresh
@bashq

8- Time to code! - Model:
Go to the [app/Models/professor.php]
Right below where it says "use HasFactory", add:
@php
class professor extends Model
{   
    use HasFactory; 

    public $timestamps = false; /*delete this line if you're okay including timestamps!*/

    protected $table = 'professors';

    protected $fillable =[
     'name'.
     'age'
    ];
}   
@phpq


9- Time to code! - Controller:
Go to the [app/Http/Controllers/ProfessorController.php]
@php
use App\Models\professor; #Import professor model!

class ProfessorController extends Controller
{
    /* RETRIEVE
    | Query database, look for all professors.
    | Assign all entries to a list $teachers.
    | Pass this data from controller to view
    | through template variable 'roster'.
    | View rendered: 'resources/views/allOfThem.blade.php'.
    */
    public function retrieve(){
        $teachers = professor::all();
        return view('allOfThem', ['roster' => $teachers]);
    }

    /* CREATE
    | Render form: 'resources/views/newProf.blade.php'
    |
    | $request receives form-data as JSON.
    | Map the value of each key to a property
    | of a professor instance.
    | Pass this object from controller to view
    | through template variable 'prof'.
    | Once database is updated, this view is rendered:
    | 'resources/views/formSubmitted.blade.php'.
    */
    public function start_create(){
         return view('newProf');
     }

    public function commit_create(Request $request){
        $entry = new professor;
        $entry->name = $request->input('name');
        $entry->age  = $request->input('age');
        $entry->save();
        return view('formSubmitted', ['prof'=>$entry]);
    }

    /* UPDATE
    | Locate the professor that matches the $identifier. 
    | Pass this data from controller to view through
    | template variable 'old'. Rendered view will be this
    | form: 'resources/views/updateProf.blade.php' 
    |
    | $request receives form-data as JSON.
    | Map the value of each key to a property of an
    | already existing database entry. Pass that object from
    | controller to view through template variable 'prof'.
    | Render view: 'resources/views/formSubmitted.blade.php'
    */
    public function start_update($identifier){
        $entry = professor::find($identifier);
        return view('updateProf', ['old' => $entry]);
    }

    public function commit_update(Request $request, $identifier){
        $entry = professor::find($identifier);
        $entry->name = $request->input('name');
        $entry->age  = $request->input('age');
        $entry->save();
        return view('formSubmitted', ['prof' => $entry]);
    }

    /* DELETE
    | Locate the professor that matches the $identifier. 
    | Pass this data from controller to view through
    | template variable 'old'. Rendered view will be this
    | form: 'resources/views/deleteProf.blade.php' 
    | 
    | Upon form-submission, selected professor is
    | deleted from database. View rendered is:
    | 'resources/views/allOfThem.blade.php'
    | and its template variable 'roster' is mapped
    | to a list of all database entries.
    */
    public function start_delete($identifier){
        $entry = professor::find($identifier);
        return view('deleteProf', ['old' => $entry]);
    }

    public function commit_delete($identifier){
        $entry = professor::find($identifier);
        $entry->delete();
        return view('allOfThem', ['roster'=>professor::all()]);
    }
}
@phpq

10- Time to code! - Web Routes:
Web routes are typically used for handling views.
We'll now map routes to controller functions.

Go to routes/web.php

@php
use App\Http\Controllers\ProfessorController; #Import controller!

#GET request. Endpoint 'home' maps method 'retrieve' to URL '/homepage'.
Route::get('/homepage',  [ProfessorController::class, 'retrieve'])->name('home');


#GET request. Endpoint 'add' maps method 'start_create' to URL '/newOne' (Renders a form).
Route::get('/newOne', [ProfessorController::class, 'start_create'])->name('add');

#POST request. Endpoint 'adding' maps method 'commit_create' to URL '/newEntry'. 
Route::post('/newEntry', [ProfessorController::class, 'commit_create'])->name('adding');


#GET request. Endpoint 'update' maps method 'start_update' to URL '/update_item/{id}' (Renders a form)
Route::get('/update_item/{id}',   [ProfessorController::class, 'start_update'])->name('update');

#PUT request. Endpoint 'updating' maps method 'commit_update' to URL '/update_submit/{id}'
Route::put('/update_submit/{id}', [ProfessorController::class, 'commit_update'])->name('updating');


#GET request. Endpoint 'delete' maps method 'start_delete' to URL '/delete_item/{id}' (Renders a form)
Route::get('/delete_item/{id}',     [ProfessorController::class, 'start_delete']);

#DELETE request. Endpoint 'deleting' maps method 'commit_delete' to URL '/delete_submit/{id}'
Route::delete('/delete_submit/{id}', [ProfessorController::class, 'commit_delete'])->name('deleting');
@phpq




./artisan make:model student

./artisan make:controller studentController















6- Common paths:
example-app/app/Http/Controllers/ #i.e.: 
example-app/routes/api.php        #i.e.: REST APIs
example-app/routes/web.php        #i.e.: MVC controller
#i.e.: it stores ".blade.php" templates rendered by the MVC controller:
example-app/resources/views/
#CSS and JavaScript files:
example-app/resources/css/
example-app/resources/js/
#i.e.: a migration is a way to define and manage database schema changes.
It's a version control system for your database.
Allowing you to modify your database's structure without directly writing SQL queries.
example-app/database/migrations/

7- Installing some dependencies
./artisan make:model Ejercito -mc;
#'ProjectController' automatically generates a set of standard CRUD
./artisan make:controller ProjectController
#'Breeze' package provides authentication scaffolding
composer require laravel/breeze --dev
./artisan breeze:install
npm run dev   #Activates authentication service.

#Create tables based on schemas defined at example-app/database/migrations/
./artisan migrate
#CAUTION:   ./artisan migrate:fresh   will drop-&-redo all tables.


#this creates a time-stamped schema under example-app/database/migrations/
./artisan make:migration create_ejercito_table
